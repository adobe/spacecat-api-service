scraped-content-type:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - name: type
      in: path
      required: true
      description: The handler type of content to list (either 'scrapes' or 'imports').
      schema:
        type: string
        enum:
          - scrapes
          - imports
    - name: path
      in: query
      required: false
      description: |
        Optional path prefix to filter the recursive file search (e.g., 'about-us/' or 'docx/').
        If not specified, the search begins from the root directory of the specified type.
      schema:
        type: string
    - name: rootOnly
      in: query
      required: false
      description: |
        When set to true, returns only files directly under the specified prefix, excluding subdirectories.
        When false or omitted, includes all files recursively within subdirectories.
      schema:
        type: boolean
        default: false
    - name: pageSize
      in: query
      required: false
      description: Number of items to return per page. Default is 100, maximum is 1000.
      schema:
        type: integer
        default: 100
    - name: pageToken
      in: query
      required: false
      description: Pagination token obtained from the previous response's nextPageToken field.
      schema:
        type: string
  get:
    operationId: listScrapedContent
    tags:
      - scrape
    summary: List all files for a site and type with download URLs
    description: |
      Retrieves a paginated list of files for the specified site and handler type (scrapes or imports).
      The search can be filtered by path prefix and can include or exclude subdirectories.

      Features:
      - Path filtering: Start the search from a specific subdirectory
      - Root-level filtering: Option to retrieve only root-level files
      - Pagination: Control the number of results per page and navigate through results

      Each file entry includes:
      - A unique key (full path relative to the content type root)
      - File name
      - File metadata (size and last modified timestamp)
      - A pre-signed S3 URL for secure temporary file access

    responses:
      '200':
        description: Successfully retrieved the list of files with their download URLs
        content:
          application/json:
            schema:
              type: object
              properties:
                items:
                  $ref: './schemas.yaml#/ScrapedContentResponse'
                nextPageToken:
                  type: string
                  description: Token for retrieving the next page of results, if available.
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '500':
        $ref: './responses.yaml#/500'
    security:
      - api_key: []
