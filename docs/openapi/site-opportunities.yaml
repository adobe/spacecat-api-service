site-opportunities:
  parameters:
    - $ref: './parameters.yaml#/siteId'
  get:
    operationId: getSiteOpportunities
    summary: |
      Retrieve a list of all opportunities for a specific site
    tags:
      - opportunities
    responses:
      '200':
        description: A list of opportunities
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/OpportunityList'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]
  post:
    operationId: createSiteOpportunity
    summary: |
      Create a new opportunity for a specific site
    tags:
      - opportunities
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: './schemas.yaml#/OpportunityCreate'
          examples:
            broken-backlinks-opportunity:
              $ref: './examples.yaml#/broken-backlinks-opportunity-create'
    responses:
      '201':
        description: Opportunity created
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/Opportunity'
      '400':
        $ref: './responses.yaml#/400'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunities-by-status:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - name: status
      in: path
      required: true
      schema:
        type: string
  get:
    operationId: getSiteOpportunitiesByStatus
    summary: |
      Retrieve opportunities for a specific site filtered by status
    tags:
      - opportunities
    responses:
      '200':
        description: A list of opportunities filtered by status
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/OpportunityList'
      '400':
        $ref: './responses.yaml#/400'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunity:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
  get:
    operationId: getSiteOpportunity
    summary: |
      Retrieve details of a specific opportunity
    tags:
      - opportunities
    responses:
      '200':
        description: Details of the opportunity
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/Opportunity'
            examples:
              broken-backlinks-opportunity:
                $ref: './examples.yaml#/broken-backlinks-opportunity'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

  patch:
    operationId: updateSiteOpportunity
    summary: |
      Update specific attributes of an existing opportunity
    tags:
      - opportunities
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: './schemas.yaml#/OpportunityUpdate'
          examples:
            broken-backlinks-opportunity-update:
              $ref: './examples.yaml#/broken-backlinks-opportunity-update'
    responses:
      '200':
        description: Opportunity updated
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/Opportunity'
      '400':
        $ref: './responses.yaml#/400'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

  delete:
    operationId: deleteSiteOpportunity
    summary: |
      Delete an opportunity and associated suggestions + fixes
    tags:
      - opportunities
    responses:
      '204':
        description: Opportunity deleted
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunity-suggestions:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
  get:
    operationId: getSiteOpportunitySuggestions
    summary: |
      Retrieve a list of all suggestions for a specific opportunity
    tags:
      - opportunity-suggestions
    responses:
      '200':
        description: A list of suggestions
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/SuggestionList'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

  post:
    operationId: createSiteOpportunitySuggestions
    summary: |
      Create and add a list of one or more suggestions to an opportunity in one transaction
    tags:
      - opportunity-suggestions
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: './schemas.yaml#/SuggestionCreateList'
          examples:
            broken-backlinks-suggestion-create-list:
              $ref: './examples.yaml#/broken-backlinks-suggestion-create-list'
    responses:
      '207':
        description: |
          A list of suggestions created and added to the opportunity,
          or the status code and error message for the ones failed.
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/SuggestionCreateListResponse'
            examples:
              broken-backlinks-suggestion-create-list-response:
                $ref: './examples.yaml#/broken-backlinks-suggestion-create-list-response'
    security:
      - ims_key: [ ]

site-opportunity-suggestions-by-status:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
    - name: status
      in: path
      required: true
      schema:
        type: string
  get:
    operationId: getSiteOpportunitySuggestionsByStatus
    summary: |
      Retrieve suggestions for a specific opportunity filtered by status
    tags:
      - opportunity-suggestions
    responses:
      '200':
        description: A list of suggestions filtered by status
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/SuggestionList'
      '400':
        $ref: './responses.yaml#/400'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunity-suggestions-paged:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
    - $ref: './parameters.yaml#/limit'
  get:
    operationId: getSiteOpportunitySuggestionsPaged
    summary: |
      Retrieve a paginated list of suggestions for a specific opportunity
    description: |
      Returns suggestions in pages with pagination metadata. Use the cursor from the response to fetch subsequent pages.
    tags:
      - opportunity-suggestions
    responses:
      '200':
        description: A paginated list of suggestions
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/SuggestionPagedResponse'
      '400':
        $ref: './responses.yaml#/400'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunity-suggestions-paged-with-cursor:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
    - $ref: './parameters.yaml#/limit'
    - $ref: './parameters.yaml#/cursor'
  get:
    operationId: getSiteOpportunitySuggestionsPagedWithCursor
    summary: |
      Retrieve a paginated list of suggestions for a specific opportunity using a cursor
    description: |
      Returns suggestions in pages with pagination metadata. Provide the cursor from a previous response to fetch the next page.
    tags:
      - opportunity-suggestions
    responses:
      '200':
        description: A paginated list of suggestions
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/SuggestionPagedResponse'
      '400':
        $ref: './responses.yaml#/400'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunity-suggestions-by-status-paged:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
    - name: status
      in: path
      required: true
      schema:
        type: string
    - $ref: './parameters.yaml#/limit'
  get:
    operationId: getSiteOpportunitySuggestionsByStatusPaged
    summary: |
      Retrieve a paginated list of suggestions for a specific opportunity filtered by status
    description: |
      Returns suggestions filtered by status in pages with pagination metadata. Use the cursor from the response to fetch subsequent pages.
    tags:
      - opportunity-suggestions
    responses:
      '200':
        description: A paginated list of suggestions filtered by status
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/SuggestionPagedResponse'
      '400':
        $ref: './responses.yaml#/400'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunity-suggestions-by-status-paged-with-cursor:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
    - name: status
      in: path
      required: true
      schema:
        type: string
    - $ref: './parameters.yaml#/limit'
    - $ref: './parameters.yaml#/cursor'
  get:
    operationId: getSiteOpportunitySuggestionsByStatusPagedWithCursor
    summary: |
      Retrieve a paginated list of suggestions for a specific opportunity filtered by status using a cursor
    description: |
      Returns suggestions filtered by status in pages with pagination metadata. Provide the cursor from a previous response to fetch the next page.
    tags:
      - opportunity-suggestions
    responses:
      '200':
        description: A paginated list of suggestions filtered by status
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/SuggestionPagedResponse'
      '400':
        $ref: './responses.yaml#/400'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunity-suggestions-status:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
  patch:
    operationId: updateSiteOpportunitySuggestionsStatus
    summary: |
      Update the status of one or multiple suggestions in one transaction
    tags:
      - opportunity-suggestions
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: './schemas.yaml#/SuggestionStatusUpdate'
          examples:
            broken-backlinks-suggestions-status-update:
              $ref: './examples.yaml#/broken-backlinks-suggestions-status-update'
    responses:
      '207':
        description: |
          A list of suggestions updated,
          or the status code and error message for the ones failed.
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/SuggestionStatusUpdateListResponse'
            examples:
              broken-backlinks-suggestions-status-update-response:
                $ref: './examples.yaml#/broken-backlinks-suggestions-status-update-response'
    security:
      - ims_key: [ ]

site-opportunity-suggestions-auto-fix:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
  patch:
    operationId: autoFixSiteOpportunitySuggestions
    summary: |
        Trigger autofix for one or multiple suggestions, and set them to 'In Progress'
    tags:
      - opportunity-suggestions
    requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                suggestionIds:
                  type: array
                  items:
                    $ref: './schemas.yaml#/Id'
                customData:
                  description: Additional custom data to forward to the autofix worker
              required:
                - suggestionIds

    responses:
      '207':
        description: |
          A list of suggestions that are sent to autofix,
          or the status code and error message for the ones failed.
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/SuggestionStatusUpdateListResponse'
            examples:
              broken-backlinks-suggestions-status-update-response:
                $ref: './examples.yaml#/broken-backlinks-suggestions-status-update-response'
    security:
      - ims_key: [ ]

site-opportunity-suggestion:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
    - $ref: './parameters.yaml#/suggestionId'
  get:
    operationId: getSiteOpportunitySuggestion
    summary: |
      Retrieve details of a specific suggestion
    tags:
      - opportunity-suggestions
    responses:
      '200':
        description: Details of the suggestion
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/Suggestion'
            examples:
              broken-backlinks-suggestion:
                $ref: './examples.yaml#/broken-backlinks-suggestion'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]
  patch:
    operationId: updateSiteOpportunitySuggestion
    summary: |
      Update specific attributes of an existing suggestion
    tags:
      - opportunity-suggestions
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: './schemas.yaml#/SuggestionUpdate'
          examples:
            broken-backlinks-suggestion-update:
              $ref: './examples.yaml#/broken-backlinks-suggestion-update'
    responses:
      '200':
        description: Suggestion updated
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/Suggestion'
            examples:
              broken-backlinks-suggestion:
                $ref: './examples.yaml#/broken-backlinks-suggestion'
      '400':
        $ref: './responses.yaml#/400'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

  delete:
    operationId: deleteSiteOpportunitySuggestion
    summary: |
      Delete a suggestion
    tags:
      - opportunity-suggestions
    responses:
      '204':
        description: Suggestion deleted
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunity-suggestions-edge-live-preview:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
  post:
    operationId: edgeLivePreview
    summary: |
      Fetch live content from a URL using Tokowaka-AI User-Agent
    description: |
      Fetches live content from a given URL using the Tokowaka-AI User-Agent.
      This is useful for previewing what content is currently deployed or accessible
      from a specific URL.
    tags:
      - opportunity-suggestions
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - url
            properties:
              url:
                type: string
                format: uri
                description: The URL to fetch content from
                example: https://www.lovesac.com/sactionals
    responses:
      '200':
        description: Successfully fetched content from the URL
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  enum: [success, error]
                  description: Fetch status
                statusCode:
                  type: integer
                  description: HTTP status code from the URL
                message:
                  type: string
                  description: Error message if fetch failed
                html:
                  type: object
                  description: HTML content object (similar to edge-preview response)
                  properties:
                    url:
                      type: string
                      description: The requested URL
                    content:
                      type: string
                      description: The fetched HTML content (null if fetch failed)
              example:
                status: success
                statusCode: 200
                html:
                  url: https://www.lovesac.com/sactionals
                  content: "<html>...</html>"
      '400':
        $ref: './responses.yaml#/400'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunity-suggestion-fixes:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
    - $ref: './parameters.yaml#/suggestionId'
  get:
    operationId: getSiteOpportunitySuggestionFixes
    summary: |
      Retrieve a list of all fixes for a specific suggestion
    tags:
      - opportunity-suggestions
    responses:
      '200':
        description: A list of fixes associated with the suggestion
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/FixListResponse'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunity-fixes:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
  get:
    operationId: getSiteOpportunityFixes
    summary: |
      Retrieve a list of all fixes for a specific opportunity
    tags:
      - opportunity-fixes
    responses:
      '200':
        description: A list of fixes
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/FixList'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]
  post:
    operationId: createSiteOpportunityFixes
    summary: |
      Create and add a list of one or more fixes to an opportunity in one transaction
    description: |
      Creates one or more fix entities for a given opportunity. Each fix can optionally include 
      an array of suggestionIds to associate existing suggestions with the fix. This allows you 
      to link fixes to the suggestions they address in a single transaction.
    tags:
      - opportunity-fixes
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: './schemas.yaml#/FixCreateList'
          examples:
            fix-create-list:
              $ref: './examples.yaml#/fix-create-list'
    responses:
      '207':
        description: |
          A list of fixes created and added to the opportunity,
          or the status code and error message for the ones failed.
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/FixCreateListResponse'
            examples:
              fix-create-list-response:
                $ref: './examples.yaml#/fix-create-list-response'
    security:
      - ims_key: [ ]

site-opportunity-fixes-by-status:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
    - name: status
      in: path
      required: true
      schema:
        type: string
  get:
    operationId: getSiteOpportunityFixesByStatus
    summary: |
      Retrieve fixes for a specific opportunity filtered by status
    tags:
      - opportunity-fixes
    responses:
      '200':
        description: A list of fixes filtered by status
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/FixList'
      '400':
        $ref: './responses.yaml#/400'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunity-fix:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
    - $ref: './parameters.yaml#/fixId'
  get:
    operationId: getSiteOpportunityFix
    summary: |
      Retrieve details of a specific fix
    tags:
      - opportunity-fixes
    responses:
      '200':
        description: Details of the fix
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/Fix'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]
  patch:
    operationId: updateSiteOpportunityFix
    summary: |
      Update specific attributes of an existing fix
    description: |
      Updates one or more attributes of an existing fix. This includes the ability to update 
      the suggestionIds array to associate or reassociate suggestions with the fix. When updating 
      suggestionIds, the new array replaces any existing associations.
    tags:
      - opportunity-fixes
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: './schemas.yaml#/FixUpdate'
    responses:
      '200':
        description: Fix updated
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/Fix'
      '400':
        $ref: './responses.yaml#/400'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]
  delete:
    operationId: deleteSiteOpportunityFix
    summary: |
      Delete a fix
    tags:
      - opportunity-fixes
    responses:
      '204':
        description: Fix deleted
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]


site-opportunity-fix-suggestions:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
    - $ref: './parameters.yaml#/fixId'
  get:
    operationId: getSiteOpportunityFixSuggestions
    summary: |
      Retrieve a list of all suggestions for a specific fix
    tags:
      - opportunity-fixes
    responses:
      '200':
        description: A list of suggestions
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/SuggestionList'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunity-fix-rollback:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
    - $ref: './parameters.yaml#/fixId'
  post:
    operationId: rollbackSiteOpportunityFix
    summary: |
      Roll back a failed fix and mark associated suggestions as skipped
    description: |
      Atomically rolls back a failed fix:
      - Marks the Fix as ROLLED_BACK (only if currently in FAILED status)
      - Marks all associated suggestions with ERROR status as SKIPPED

      This operation will fail if:
      - The fix is not in FAILED status
      - No suggestions are found for the fix

      Either all updates succeed or none are applied.
    tags:
      - opportunity-fixes
    responses:
      '200':
        description: Fix successfully rolled back
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/FixRollbackResponse'
      '400':
        $ref: './responses.yaml#/400'
      '401':
        $ref: './responses.yaml#/401'
      '404':
        $ref: './responses.yaml#/404'
      '429':
        $ref: './responses.yaml#/429'
      '500':
        $ref: './responses.yaml#/500'
      '503':
        $ref: './responses.yaml#/503'
    security:
      - ims_key: [ ]

site-opportunity-status:
  parameters:
    - $ref: './parameters.yaml#/siteId'
    - $ref: './parameters.yaml#/opportunityId'
  patch:
    operationId: updateSiteOpportunityStatus
    summary: |
      Update the status of one or multiple fixes in one transaction
    tags:
      - opportunity-fixes
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: './schemas.yaml#/FixStatusUpdate'
    responses:
      '207':
        description: |
          A list of fixes updated,
          or the status code and error message for the ones failed.
        content:
          application/json:
            schema:
              $ref: './schemas.yaml#/FixStatusUpdateListResponse'
    security:
      - ims_key: [ ]
