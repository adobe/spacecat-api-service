# ============================================
# SpaceCat API Service - Local Development
# ============================================

# ----------------
# AWS Configuration (Required)
# ----------------
# For local development, these can be fake values when DEV_SKIP_DYNAMODB=true
AWS_ACCESS_KEY_ID=fake-access-key-id
AWS_DEFAULT_REGION=us-east-1
AWS_SECRET_ACCESS_KEY=fake-secret-access-key
# AWS_SESSION_TOKEN=your-session-token-if-needed

# ----------------
# API Authentication (Required)
# ----------------
# These are the keys you'll use in the x-api-key header for local testing
USER_API_KEY=local-dev-key
ADMIN_API_KEY=local-admin-key

# ----------------
# LLMO Configuration
# ----------------
# REQUIRED: Get real HLX API key from AWS Secrets Manager (production)
# Secret name: /spacecat/llmo/hlx-api-key
# Without this key, LLMO endpoints will return 401 errors from HLX
LLMO_HLX_API_KEY=YOUR_REAL_HLX_API_KEY_HERE

# Optional: Only needed for onboarding/offboarding operations
LLMO_ONBOARDING_GITHUB_TOKEN=YOUR_GITHUB_TOKEN_HERE
SHAREPOINT_CLIENT_ID=YOUR_SHAREPOINT_CLIENT_ID_HERE
SHAREPOINT_CLIENT_SECRET=YOUR_SHAREPOINT_CLIENT_SECRET_HERE
SHAREPOINT_AUTHORITY=https://login.microsoftonline.com/YOUR_TENANT_ID
SHAREPOINT_DOMAIN_ID=YOUR_SHAREPOINT_DOMAIN_ID_HERE
HLX_ADMIN_TOKEN=YOUR_HLX_ADMIN_TOKEN_HERE

# ----------------
# Environment Settings
# ----------------
ENV=dev
DEFAULT_ORGANIZATION_ID=00000000-0000-0000-0000-000000000000

# ----------------
# DEV MODE: Skip DynamoDB for LLMO Testing
# ----------------
# Set to 'true' to bypass DynamoDB and use mock site data
# This allows testing LLMO endpoints without AWS credentials
DEV_SKIP_DYNAMODB=true

# Configure the mock LLMO data folder (which folder in HLX to fetch from)
# Examples: 'adobe-com', 'adobe', 'coca-cola-com', 'dev/test-site'
DEV_LLMO_DATA_FOLDER=adobe

# Mock brand name (optional, for display purposes)
DEV_LLMO_BRAND=Adobe

# ----------------
# Required Controllers Configuration
# ----------------
# These are required for controllers that initialize on startup

# Scrape Job Configuration (required by ScrapeJobController)
SCRAPE_JOB_CONFIGURATION={"queues":["spacecat-scrape-queue-1"],"scrapeWorkerQueue":"https://sqs.us-east-1.amazonaws.com/1234567890/scrape-worker-queue","scrapeQueueUrlPrefix":"https://sqs.us-east-1.amazonaws.com/1234567890/","s3Bucket":"test-scrape-bucket","maxUrlsPerJob":3,"options":{"enableJavascript":true,"hideConsentBanners":false}}

# Reports Configuration (required by ReportsController)
REPORT_JOBS_QUEUE_URL=https://sqs.us-east-1.amazonaws.com/123456789012/report-jobs-queue
S3_REPORT_BUCKET=test-report-bucket
S3_MYSTIQUE_BUCKET=test-mystique-bucket

# Audit Queue (required for audit endpoints)
AUDIT_JOBS_QUEUE_URL=https://sqs.us-east-1.amazonaws.com/123456789012/audit-jobs-queue

# ----------------
# Optional Configuration
# ----------------
# Uncomment and configure as needed for specific functionality

# RUM & Analytics
# RUM_DOMAIN_KEY=YOUR_RUM_DOMAIN_KEY_HERE

# Slack Integration
SLACK_BOT_TOKEN=YOUR_SLACK_BOT_TOKEN_HERE
SLACK_TOKEN_WORKSPACE_EXTERNAL_ELEVATED=YOUR_SLACK_TOKEN_HERE
SLACK_OPS_CHANNEL_WORKSPACE_EXTERNAL=YOUR_CHANNEL_ID_HERE
SLACK_URL_WORKSPACE_EXTERNAL=https://your-workspace.slack.com
AUDIT_REPORT_SLACK_CHANNEL_ID=YOUR_CHANNEL_ID_HERE

# IMS (Adobe Identity Management)
IMS_CLIENT_ID=YOUR_IMS_CLIENT_ID_HERE
IMS_HOST=https://ims-na1.adobelogin.com
IMS_CLIENT_CODE=YOUR_IMS_CLIENT_CODE_HERE
IMS_CLIENT_SECRET=YOUR_IMS_CLIENT_SECRET_HERE

# Fulfillment
# FULFILLMENT_EVENTS_QUEUE_URL=https://sqs.us-east-1.amazonaws.com/123456789012/fulfillment-events-queue

# Multipart Form Data Limits
# MULTIPART_FORM_FILE_COUNT_LIMIT=5
# MULTIPART_FORM_MAX_FILE_SIZE_MB=20

# Sandbox Audit Rate Limit (hours between same audit runs, 0 = disabled)
# SANDBOX_AUDIT_RATE_LIMIT_HOURS=4

# Email Templates
# EMAIL_LLMO_TEMPLATE=expdev_xwalk_trial_confirm

# ============================================
# GETTING STARTED
# ============================================
# 1. Copy this file to .env: cp .env.example .env
# 2. Replace LLMO_HLX_API_KEY with real key from AWS Secrets Manager
# 3. Run: npm start
# 4. Server runs at: http://localhost:3000
# 5. Test: curl -H "x-api-key: local-dev-key" http://localhost:3000/...
# PostgreSQL / Aurora Configuration
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DATABASE=spacecatdb
POSTGRES_USER=spacecatuser
POSTGRES_PASSWORD=spacecatpassword
ENABLE_AURORA_QUERIES=true
POSTGRES_SSL=false
